<!DOCTYPE html>
<html>
<head>
  <title>Libook--the largest ebook library</title>
  <meta charset="utf-8">
  <link rel="stylesheet" type="text/css" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  <link href='https://fonts.googleapis.com/css?family=Dancing+Script' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" type="text/css" href="css/bootstrap.css">
  <link rel="stylesheet" type="text/css" href="css/style.css">
</head>
<body class="bg container-fluid">
	<div class="content" ng-app="WikiApp" ng-controller="MainCtrl">
		<div class="header">
			<h1 class="title">Libook</h1>
			<p class="text-muted fz-me help">The largest ebook library.</p>
			<form >
				<div class="search">
					<input type="text" class="form-control searchField" placeholder="please input">  
					<button type="submit" class="btn searchBtn">
						<i class="fa fa-2x fa-search searchicon"></i>
					</button>
				</div>
			</form>
		</div>
		<ul class="listView" id="list">
		</ul>
	</div>
  <script type="text/javascript" src="js/jquery-3.1.0.min.js"></script>
   <script type="text/javascript">
var input = $('input');
input.keyup(function(){
	search();
});
 function search () {  
  	var title = input.val();
    var api = 'http://www.libooc.com/libooc/search/default';
    var page = 'book.html?ebid=';
    // http://www.libooc.com/jfinal_demo/libookndex
         var url = api;
         $.ajax({  
             url: url,  
             type: 'GET',  
             dataType: 'json', 
             data:{
             	search:title,
             	page:1,
             	pagesize:100
             }, 
             timeout: 1000,  
             cache: false,  
             beforeSend: LoadFunction, //加载执行方法    
             error: erryFunction,  //错误执行方法    
             success: succFunction //成功执行方法    
         })  
         function LoadFunction() {  
             $("#list").html('Loading...');  
         }  
         function erryFunction() {  
             alert("Please input a book title");  
         }  
         function succFunction(result) {  
             $("#list").html('');  
             var json = eval(result.indexs); //数组  
             var str=$("#list").html();
             
             $.each(json, function (index, item) {  
             	str=str+"<a href='"+page+json[index].e_id+"' target='_blank'><li class='bookRow'><div class='row'><div class='col-md-12'><span class='bookId'>#";
             	str=str+(index+1)+"</span><h1 class='bookTitle'>";
             	str=str+json[index].title+"</h1><p class='bookAuthor'>";
             	str=str+json[index].author+"</p><p class='buyUrl'>Buy</p>"
             	$("#list").html(str);
             });  
         }  
     }; 
  </script>
</body>
</html>
